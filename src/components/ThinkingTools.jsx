import React,{useState,useEffect}from 'react';import{ArrowLeft,X,Download}from 'lucide-react';export default function ThinkingTools({onBack}){const[p,setP]=useState(0),[i,setI]=useState(null);useEffect(()=>{if(!window.html2pdf){const s=document.createElement('script');s.src='https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js';document.head.appendChild(s);}},[]); useEffect(()=>{if(p&&i){setTimeout(()=>{const src=document.getElementById(`template-${i}`);const tgt=document.getElementById(`preview-${i}`);if(src&&tgt)tgt.innerHTML=src.innerHTML;},100);}},
[p,i]);const download=(id,name)=>{if(!window.html2pdf)return;const el=document.getElementById(id);if(!el)return;html2pdf().set({margin:10,filename:name+'.pdf',jsPDF:{orientation:'portrait',unit:'mm',format:'a4'}}).from(el).save();};const fw=[{id:'cornell',name:'åº·å¥ˆå°”ç¬”è®°æ³•',emoji:'ğŸ“'},{id:'lean',name:'ç²¾ç›Šç”»å¸ƒ',emoji:'ğŸ“Š'},{id:'empathy',name:'åŒç†å¿ƒåœ°å›¾',emoji:'â¤ï¸'},{id:'matrix',name:'è‰¾æ£®è±ªå¨å°”çŸ©é˜µ',emoji:'âš¡'},{id:'scqa',name:'SCQAæ¡†æ¶',emoji:'ğŸ¯'},{id:'whys',name:'äº”æ­¥åˆ†ææ³•',emoji:'ğŸ¤”'},{id:'swot',name:'SWOTåˆ†æ',emoji:'ğŸ”'},{id:'journey',name:'ç”¨æˆ·æ—…ç¨‹åœ°å›¾',emoji:'ğŸ—ºï¸'},{id:'kpt',name:'KPTåæ€æ³•',emoji:'ğŸ’¡'},{id:'hats',name:'å…­é¡¶æ€è€ƒå¸½',emoji:'ğŸ©'},{id:'impact',name:'å½±å“åŠ›çŸ©é˜µ',emoji:'ğŸ“ˆ'}];return<div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50"><div className="sticky top-0 z-40 bg-white border-b shadow-sm"><div className="max-w-7xl mx-auto px-4 py-4 flex gap-3"><button onClick={onBack} className="p-2 hover:bg-gray-100 rounded-lg"><ArrowLeft className="w-6 h-6"/></button><h1 className="text-2xl font-bold text-gray-800">æ€è€ƒå·¥å…·åº“</h1></div></div><div className="max-w-7xl mx-auto px-4 py-8"><div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">{fw.map(f=>(<div key={f.id} className="bg-white rounded-lg shadow-md hover:shadow-lg overflow-hidden"><div className="p-6"><div className="text-4xl mb-3">{f.emoji}</div><h2 className="text-xl font-semibold text-gray-800 mb-4">{f.name}</h2><div className="flex gap-3"><button onClick={()=>{setI(f.id);setP(true);}} className="flex-1 px-4 py-2 bg-blue-50 text-blue-600 hover:bg-blue-100 rounded-lg transition-colors font-medium">é¢„è§ˆ</button><button onClick={()=>download(`template-${f.id}`,f.name)} className="flex-1 px-4 py-2 bg-green-50 text-green-600 hover:bg-green-100 rounded-lg transition-colors font-medium flex items-center justify-center gap-2"><Download className="w-4 h-4"/>ä¸‹è½½</button></div></div></div>))}</div></div><div style={{display:'none'}}><div id="template-cornell"><h2>åº·å¥ˆå°”ç¬”è®°æ³•</h2><table style={{width:'100%',borderCollapse:'collapse'}}><tr><td style={{border:'2px solid #333',padding:'15px'}}>å…³é”®è¯</td><td style={{border:'2px solid #333',padding:'15px',height:'200px'}}>ç¬”è®°</td></tr><tr><td colSpan="2" style={{border:'2px solid #333',padding:'15px',height:'80px'}}>æ€»ç»“</td></tr></table></div><div id="template-lean"><h2>ç²¾ç›Šç”»å¸ƒ</h2></div><div id="template-empathy"><h2>åŒç†å¿ƒåœ°å›¾</h2></div><div id="template-matrix"><h2>è‰¾æ£®è±ªå¨å°”çŸ©é˜µ</h2></div><div id="template-scqa"><h2>SCQAæ¡†æ¶</h2></div><div id="template-whys"><h2>äº”æ­¥åˆ†ææ³•</h2></div><div id="template-swot"><h2>SWOTåˆ†æ</h2></div><div id="template-journey"><h2>ç”¨æˆ·æ—…ç¨‹åœ°å›¾</h2></div><div id="template-kpt"><h2>KPTåæ€æ³•</h2></div><div id="template-hats"><h2>å…­é¡¶æ€è€ƒå¸½</h2></div><div id="template-impact"><h2>å½±å“åŠ›çŸ©é˜µ</h2></div></div>{p&&i&&(<div className="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4 overflow-auto"><div className="bg-white rounded-lg shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-auto"><div className="sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between"><h3 className="text-xl font-semibold text-gray-800">{fw.find(f=>f.id===i)?.name}</h3><button onClick={()=>setP(false)} className="p-2 hover:bg-gray-100 rounded-lg transition-colors"><X className="w-6 h-6 text-gray-600"/></button></div><div className="p-6 bg-gray-50"><div id={`preview-${i}`} style={{backgroundColor:'#fff',padding:'20px',borderRadius:'8px',border:'1px solid #ddd'}}/></div><div className="sticky bottom-0 bg-white border-t border-gray-200 px-6 py-4 flex justify-end gap-3"><button onClick={()=>download(`preview-${i}`,fw.find(f=>f.id===i)?.name)} className="px-4 py-2 bg-green-600 text-white hover:bg-green-700 rounded-lg transition-colors flex items-center gap-2"><Download className="w-4 h-4"/>ä¸‹è½½ PDF</button></div></div></div>)}</div>;
}